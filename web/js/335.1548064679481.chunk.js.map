{"version":3,"sources":["webpack:///./src/main/js/apps/feedback/downgrade/DowngradeFeedback.css?a335","webpack:///./src/main/js/apps/feedback/downgrade/DowngradeFeedback.css","webpack:///./src/main/js/apps/feedback/downgrade/DowngradeFeedback.tsx","webpack:///./src/main/js/components/controls/Radio.tsx","webpack:///./src/main/js/app/utils/addGlobalSuccessMessage.ts","webpack:///./src/main/js/api/billing.ts"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","Reason","_super","Radio","_this","apply","this","arguments","handleClick","event","preventDefault","currentTarget","blur","props","onCheck","value","__extends","prototype","render","index_js_exposed","aria-checked","checked","className","classnames","href","onClick","role","is-checked","children","DowngradeFeedback_DowngradeFeedback","DowngradeFeedback","state","additionalFeedback","handleChange","setState","handleChoice","feedback","handleSkip","navigateAway","handleSubmit","organization","getLocationState","Object","billing","key","l10n","location","message","addGlobalSuccessMessage","returnTo","router","replace","pathname","urls","DowngradeFeedback_extends","_a","confirmationMessage","title","Alert","variant","onSubmit","keys","map","reason","controls_Radio","htmlFor","id","name","onChange","placeholder","buttons","disabled","d","__webpack_exports__","_getStore__WEBPACK_IMPORTED_MODULE_0__","_store_globalMessages__WEBPACK_IMPORTED_MODULE_1__","dispatch","getSubscriptionPlans","giveDowngradeFeedback","_helpers_request__WEBPACK_IMPORTED_MODULE_0__","_app_utils_throwGlobalError__WEBPACK_IMPORTED_MODULE_1__","then","subscriptionPlans","data"],"mappings":"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","file":"js/335.1548064679481.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./DowngradeFeedback.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./DowngradeFeedback.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../../node_modules/postcss-loader/src/index.js??postcss!./DowngradeFeedback.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\n * SonarQube\\n * Copyright (C) 2009-2019 SonarSource SA\\n * mailto:info AT sonarsource DOT com\\n *\\n * This program is free software; you can redistribute it and/or\\n * modify it under the terms of the GNU Lesser General Public\\n * License as published by the Free Software Foundation; either\\n * version 3 of the License, or (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\\n * Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program; if not, write to the Free Software Foundation,\\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\\n */\\n.billing-downgrade-feedback > .alert {\\n  max-width: 400px;\\n  margin: 30px auto 50px auto;\\n}\\n\\n.billing-downgrade-feedback .boxed-group {\\n  margin-top: 5vh;\\n}\\n\\n.billing-downgrade-feedback .boxed-group-header {\\n  padding-top: 40px;\\n  text-align: center;\\n}\\n\\n.billing-downgrade-feedback .boxed-group-inner {\\n  padding: 50px 50px 40px 50px;\\n}\\n\\n.billing-downgrade-feedback h2 {\\n  font-weight: bold;\\n  font-size: 18px;\\n  margin-bottom: 20px;\\n}\\n\\n.billing-downgrade-feedback .boxed-group-list li {\\n  margin-left: 0;\\n  padding-left: 0;\\n}\\n\\n.billing-downgrade-feedback input[type='radio'] {\\n  margin-right: 1em;\\n}\\n\\n.billing-downgrade-feedback-form-actions {\\n  margin-top: 36px;\\n}\\n\\n.billing-downgrade-feedback-explain-wrapper {\\n  margin-left: 25px;\\n  padding-top: 20px;\\n}\\n\\n.billing-downgrade-feedback-explain-wrapper label {\\n  display: block;\\n  margin-bottom: 4px;\\n  font-weight: bold;\\n}\\n\\n.billing-downgrade-feedback-explain-wrapper label .note {\\n  font-weight: normal;\\n  margin-left: 0.5em;\\n}\\n\\n.billing-downgrade-feedback-explain-wrapper textarea {\\n  display: block;\\n  min-height: 70px;\\n  width: 100%;\\n  padding: 6px 8px;\\n  border: 1px solid #cdcdcd;\\n  border-radius: 2px;\\n}\\n\", \"\"]);\n\n// exports\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { WithRouterProps } from 'react-router';\nimport { Alert } from '../../../components/ui/Alert';\nimport { SubmitButton } from '../../../components/ui/buttons';\nimport { translate } from '../../../helpers/l10n';\nimport { giveDowngradeFeedback } from '../../../api/billing';\nimport { getBaseUrl } from '../../../helpers/urls';\nimport addGlobalSuccessMessage from '../../../app/utils/addGlobalSuccessMessage';\nimport Radio from '../../../components/controls/Radio';\nimport './DowngradeFeedback.css';\n\nenum Reason {\n  doesntWork = 'did_not_work',\n  doesntMeetExpectations = 'did_not_match_expectations',\n  doesntMeetCompanyPolicy = 'company_policy',\n  onlyTesting = 'just_testing',\n  other = 'other'\n}\n\ninterface State {\n  additionalFeedback: string;\n  feedback?: Reason;\n}\n\nexport interface LocationState {\n  confirmationMessage?: string;\n  organization?: T.Organization;\n  returnTo?: string;\n  title: string;\n}\n\nexport default class DowngradeFeedback extends React.PureComponent<WithRouterProps, State> {\n  state: State = {\n    additionalFeedback: ''\n  };\n\n  handleChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    this.setState({\n      additionalFeedback: event.currentTarget.value\n    });\n  };\n\n  handleChoice = (value: string) => {\n    this.setState({\n      feedback: value as Reason\n    });\n  };\n\n  handleSkip = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    this.navigateAway();\n  };\n\n  handleSubmit = (event: React.FormEvent) => {\n    event.preventDefault();\n\n    const { organization } = this.getLocationState();\n    if (!organization) {\n      return;\n    }\n\n    giveDowngradeFeedback({\n      organization: organization.key,\n      feedback: this.state.feedback as string,\n      additionalFeedback: this.state.additionalFeedback\n    });\n\n    this.navigateAway(translate('billing.downgrade.thankyou_for_feedback'));\n  };\n\n  getLocationState = (): LocationState => {\n    const { location } = this.props;\n    return location.state || {};\n  };\n\n  navigateAway = (message?: string) => {\n    if (message) {\n      addGlobalSuccessMessage(message);\n    }\n\n    const { returnTo } = this.getLocationState();\n    this.props.router.replace({\n      pathname: returnTo || getBaseUrl()\n    });\n  };\n\n  render() {\n    const { organization, confirmationMessage, title } = this.getLocationState();\n    if (!organization) {\n      return null;\n    }\n\n    return (\n      <div className=\"billing-downgrade-feedback\">\n        {confirmationMessage && <Alert variant=\"success\">{confirmationMessage}</Alert>}\n        <div className=\"boxed-group boxed-group-centered\">\n          <div className=\"boxed-group-header\">\n            <h2>{title}</h2>\n            <div>{translate('billing.downgrade.reason.explanation')}</div>\n          </div>\n          <div className=\"boxed-group-inner\">\n            <form className=\"billing-downgrade-feedback-form\" onSubmit={this.handleSubmit}>\n              <ul className=\"boxed-group-list\">\n                {Object.keys(Reason).map(key => {\n                  const reason = Reason[key as any];\n                  return (\n                    <li key={reason}>\n                      <Radio\n                        checked={this.state.feedback === reason}\n                        onCheck={this.handleChoice}\n                        value={reason}>\n                        {translate('billing.downgrade.reason.option', reason, 'label')}\n                      </Radio>\n                      {this.state.feedback === reason && (\n                        <div className=\"billing-downgrade-feedback-explain-wrapper\">\n                          <label htmlFor={`reason_text_${reason}`}>\n                            {translate('billing.why')}\n                            <span className=\"note\">{translate('billing.optional')}</span>\n                          </label>\n                          <textarea\n                            id={`reason_text_${reason}`}\n                            name={`reason_text_${reason}`}\n                            onChange={this.handleChange}\n                            placeholder={translate(\n                              'billing.downgrade.reason.option',\n                              reason,\n                              'placeholder'\n                            )}\n                            value={this.state.additionalFeedback}\n                          />\n                        </div>\n                      )}\n                    </li>\n                  );\n                })}\n              </ul>\n              <div className=\"billing-downgrade-feedback-form-actions\">\n                <SubmitButton className=\"spacer-right\" disabled={!this.state.feedback}>\n                  {translate('billing.send')}\n                </SubmitButton>\n                <a href=\"#\" onClick={this.handleSkip}>\n                  {translate('billing.skip')}\n                </a>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as classNames from 'classnames';\n\ninterface Props {\n  checked: boolean;\n  className?: string;\n  onCheck: (value: string) => void;\n  value: string;\n}\n\nexport default class Radio extends React.PureComponent<Props> {\n  handleClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    event.preventDefault();\n    event.currentTarget.blur();\n    this.props.onCheck(this.props.value);\n  };\n\n  render() {\n    return (\n      <a\n        aria-checked={this.props.checked}\n        className={classNames(\n          'display-inline-flex-center link-base-color link-no-underline',\n          this.props.className\n        )}\n        href=\"#\"\n        onClick={this.handleClick}\n        role=\"radio\">\n        <i\n          className={classNames('icon-radio', 'spacer-right', {\n            'is-checked': this.props.checked\n          })}\n        />\n        {this.props.children}\n      </a>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport getStore from './getStore';\nimport * as globalMessages from '../../store/globalMessages';\n\nexport default function addGlobalSuccessMessage(message: string): void {\n  const store = getStore();\n  store.dispatch(globalMessages.addGlobalSuccessMessage(message));\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport { getJSON, post } from '../helpers/request';\nimport throwGlobalError from '../app/utils/throwGlobalError';\n\nexport function getSubscriptionPlans(): Promise<T.SubscriptionPlan[]> {\n  return getJSON('/api/billing/show_subscription_plans').then(\n    ({ subscriptionPlans }) => subscriptionPlans,\n    throwGlobalError\n  );\n}\n\nexport function giveDowngradeFeedback(data: {\n  organization: string;\n  feedback: string;\n  additionalFeedback?: string;\n}): Promise<void> {\n  return post('/api/billing/send_feedback', data);\n}\n"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/main/js/apps/projectDeletion/Header.tsx","webpack:///./src/main/js/apps/projectDeletion/Form.tsx","webpack:///./src/main/js/apps/projectDeletion/App.tsx","webpack:///./src/main/js/components/controls/Modal.tsx","webpack:///./src/main/js/components/controls/SimpleModal.tsx","webpack:///./src/main/js/components/controls/ModalButton.tsx","webpack:///./src/main/js/components/controls/ConfirmModal.tsx","webpack:///./src/main/js/components/controls/ConfirmButton.tsx"],"names":["Header","props","description","qualifier","component","includes","Object","l10n","index_js_exposed","className","projectDeletion_Form","es","_super","Form","_this","apply","this","arguments","handleDelete","isProject","deleteMethod","components","redirectTo","key","then","router","replace","__extends","prototype","render","ConfirmButton","confirmButtonText","isDestructive","modalBody","name","modalHeader","onConfirm","_a","onClick","buttons","id","App","Helmet_default","a","title","__webpack_require__","d","__webpack_exports__","Modal","react__WEBPACK_IMPORTED_MODULE_0__","react_modal__WEBPACK_IMPORTED_MODULE_1__","__assign","classnames__WEBPACK_IMPORTED_MODULE_2__","modal-medium","medium","modal-large","large","modal-simple","simple","isOpen","overlayClassName","modal-no-backdrop","noBackdrop","SimpleModal","mounted","state","submitting","stopSubmitting","setState","handleCloseClick","event","preventDefault","currentTarget","blur","onClose","handleFormSubmit","submit","handleSubmitClick","result","onSubmit","componentDidMount","componentWillUnmount","_Modal__WEBPACK_IMPORTED_MODULE_1__","contentLabel","header","onRequestClose","children","onCloseClick","onFormSubmit","onSubmitClick","ModalButton","modal","handleButtonClick","handleCloseModal","ConfirmModal","handleSubmit","confirmData","renderModalContent","_b","confirmDisable","_c","cancelButtonText","_helpers_l10n__WEBPACK_IMPORTED_MODULE_3__","_common_DeferredSpinner__WEBPACK_IMPORTED_MODULE_2__","loading","_ui_buttons__WEBPACK_IMPORTED_MODULE_4__","autoFocus","undefined","disabled","_SimpleModal__WEBPACK_IMPORTED_MODULE_1__","renderConfirmModal","_ConfirmModal__WEBPACK_IMPORTED_MODULE_2__","_ModalButton__WEBPACK_IMPORTED_MODULE_1__"],"mappings":"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","file":"js/331.1548064679481.chunk.js","sourcesContent":["/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'qualifier'>;\n}\n\nexport default function Header(props: Props) {\n  const { qualifier } = props.component;\n  let description: string;\n  if (['VW', 'SVW'].includes(qualifier)) {\n    description = translate('portfolio_deletion.page.description');\n  } else if (qualifier === 'APP') {\n    description = translate('application_deletion.page.description');\n  } else {\n    description = translate('project_deletion.page.description');\n  }\n\n  return (\n    <header className=\"page-header\">\n      <h1 className=\"page-title\">{translate('deletion.page')}</h1>\n      <div className=\"page-description\">{description}</div>\n    </header>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport { withRouter, WithRouterProps } from 'react-router';\nimport { deleteProject, deletePortfolio } from '../../api/components';\nimport { Button } from '../../components/ui/buttons';\nimport { translate, translateWithParameters } from '../../helpers/l10n';\nimport ConfirmButton from '../../components/controls/ConfirmButton';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name' | 'qualifier'>;\n}\n\nexport default withRouter(\n  class Form extends React.PureComponent<Props & WithRouterProps> {\n    handleDelete = () => {\n      const { component } = this.props;\n      const isProject = component.qualifier === 'TRK';\n      const deleteMethod = isProject ? deleteProject : deletePortfolio;\n      const redirectTo = isProject ? '/' : '/portfolios';\n      return deleteMethod(component.key).then(() => {\n        this.props.router.replace(redirectTo);\n      });\n    };\n\n    render() {\n      const { component } = this.props;\n      return (\n        <ConfirmButton\n          confirmButtonText={translate('delete')}\n          isDestructive={true}\n          modalBody={translateWithParameters(\n            'project_deletion.delete_resource_confirmation',\n            component.name\n          )}\n          modalHeader={translate('qualifier.delete', component.qualifier)}\n          onConfirm={this.handleDelete}>\n          {({ onClick }) => (\n            <Button className=\"button-red\" id=\"delete-project\" onClick={onClick}>\n              {translate('delete')}\n            </Button>\n          )}\n        </ConfirmButton>\n      );\n    }\n  }\n);\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Helmet from 'react-helmet';\nimport Header from './Header';\nimport Form from './Form';\nimport { translate } from '../../helpers/l10n';\n\ninterface Props {\n  component: Pick<T.Component, 'key' | 'name' | 'qualifier'>;\n}\n\nexport default function App(props: Props) {\n  return (\n    <div className=\"page page-limited\">\n      <Helmet title={translate('deletion.page')} />\n      <Header component={props.component} />\n      <Form component={props.component} />\n    </div>\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport * as ReactModal from 'react-modal';\nimport * as classNames from 'classnames';\n\nReactModal.setAppElement('#content');\n\ninterface OwnProps {\n  medium?: boolean;\n  noBackdrop?: boolean;\n  large?: boolean;\n  simple?: true;\n}\n\ntype MandatoryProps = Pick<ReactModal.Props, 'contentLabel'>;\n\ntype Props = Partial<ReactModal.Props> & MandatoryProps & OwnProps;\n\nexport default function Modal(props: Props) {\n  return (\n    <ReactModal\n      className={classNames('modal', {\n        'modal-medium': props.medium,\n        'modal-large': props.large,\n        'modal-simple': props.simple\n      })}\n      isOpen={true}\n      overlayClassName={classNames('modal-overlay', { 'modal-no-backdrop': props.noBackdrop })}\n      {...props}\n    />\n  );\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport Modal from './Modal';\n\nexport interface ChildrenProps {\n  onCloseClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  onFormSubmit: (event: React.SyntheticEvent<HTMLFormElement>) => void;\n  onSubmitClick: (event?: React.SyntheticEvent<HTMLElement>) => void;\n  submitting: boolean;\n}\n\ninterface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  header: string;\n  onClose: () => void;\n  onSubmit: () => void | Promise<void>;\n}\n\ninterface State {\n  submitting: boolean;\n}\n\nexport default class SimpleModal extends React.Component<Props, State> {\n  mounted = false;\n  state: State = { submitting: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  stopSubmitting = () => {\n    if (this.mounted) {\n      this.setState({ submitting: false });\n    }\n  };\n\n  handleCloseClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.props.onClose();\n  };\n\n  handleFormSubmit = (event: React.SyntheticEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    this.submit();\n  };\n\n  handleSubmitClick = (event?: React.SyntheticEvent<HTMLElement>) => {\n    if (event) {\n      event.preventDefault();\n      event.currentTarget.blur();\n    }\n    this.submit();\n  };\n\n  submit = () => {\n    const result = this.props.onSubmit();\n    if (result) {\n      this.setState({ submitting: true });\n      result.then(this.stopSubmitting, this.stopSubmitting);\n    }\n  };\n\n  render() {\n    return (\n      <Modal contentLabel={this.props.header} onRequestClose={this.props.onClose}>\n        {this.props.children({\n          onCloseClick: this.handleCloseClick,\n          onFormSubmit: this.handleFormSubmit,\n          onSubmitClick: this.handleSubmitClick,\n          submitting: this.state.submitting\n        })}\n      </Modal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\n\nexport interface ChildrenProps {\n  onClick: () => void;\n  onFormSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n}\n\nexport interface ModalProps {\n  onClose: () => void;\n}\n\nexport interface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  modal: (props: ModalProps) => React.ReactNode;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ModalButton extends React.PureComponent<Props, State> {\n  mounted = false;\n  state: State = { modal: false };\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleButtonClick = () => {\n    this.setState({ modal: true });\n  };\n\n  handleFormSubmit = (event?: React.FormEvent<HTMLFormElement>) => {\n    if (event) {\n      event.preventDefault();\n    }\n    this.setState({ modal: true });\n  };\n\n  handleCloseModal = () => {\n    if (this.mounted) {\n      this.setState({ modal: false });\n    }\n  };\n\n  render() {\n    return (\n      <>\n        {this.props.children({\n          onClick: this.handleButtonClick,\n          onFormSubmit: this.handleFormSubmit\n        })}\n        {this.state.modal && this.props.modal({ onClose: this.handleCloseModal })}\n      </>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport SimpleModal, { ChildrenProps } from './SimpleModal';\nimport DeferredSpinner from '../common/DeferredSpinner';\nimport { translate } from '../../helpers/l10n';\nimport { SubmitButton, ResetButtonLink } from '../ui/buttons';\n\ninterface Props<T> {\n  children: React.ReactNode;\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: T;\n  confirmDisable?: boolean;\n  header: string;\n  isDestructive?: boolean;\n  onClose: () => void;\n  onConfirm: (data?: T) => void | Promise<void>;\n}\n\nexport default class ConfirmModal<T = string> extends React.PureComponent<Props<T>> {\n  mounted = false;\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  handleSubmit = () => {\n    const result = this.props.onConfirm(this.props.confirmData);\n    if (result) {\n      return result.then(this.props.onClose, () => {});\n    } else {\n      this.props.onClose();\n      return undefined;\n    }\n  };\n\n  renderModalContent = ({ onCloseClick, onFormSubmit, submitting }: ChildrenProps) => {\n    const { children, confirmButtonText, confirmDisable, header, isDestructive } = this.props;\n    const { cancelButtonText = translate('cancel') } = this.props;\n    return (\n      <form onSubmit={onFormSubmit}>\n        <header className=\"modal-head\">\n          <h2>{header}</h2>\n        </header>\n        <div className=\"modal-body\">{children}</div>\n        <footer className=\"modal-foot\">\n          <DeferredSpinner className=\"spacer-right\" loading={submitting} />\n          <SubmitButton\n            autoFocus={true}\n            className={isDestructive ? 'button-red' : undefined}\n            disabled={submitting || confirmDisable}>\n            {confirmButtonText}\n          </SubmitButton>\n          <ResetButtonLink disabled={submitting} onClick={onCloseClick}>\n            {cancelButtonText}\n          </ResetButtonLink>\n        </footer>\n      </form>\n    );\n  };\n\n  render() {\n    const { header } = this.props;\n    return (\n      <SimpleModal header={header} onClose={this.props.onClose} onSubmit={this.handleSubmit}>\n        {this.renderModalContent}\n      </SimpleModal>\n    );\n  }\n}\n","/*\n * SonarQube\n * Copyright (C) 2009-2019 SonarSource SA\n * mailto:info AT sonarsource DOT com\n *\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 3 of the License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program; if not, write to the Free Software Foundation,\n * Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n */\nimport * as React from 'react';\nimport ModalButton, { ChildrenProps, ModalProps } from './ModalButton';\nimport ConfirmModal from './ConfirmModal';\n\nexport { ChildrenProps } from './ModalButton';\n\ninterface Props {\n  children: (props: ChildrenProps) => React.ReactNode;\n  cancelButtonText?: string;\n  confirmButtonText: string;\n  confirmData?: string;\n  confirmDisable?: boolean;\n  isDestructive?: boolean;\n  modalBody: React.ReactNode;\n  modalHeader: string;\n  onConfirm: (data?: string) => void | Promise<void>;\n}\n\ninterface State {\n  modal: boolean;\n}\n\nexport default class ConfirmButton extends React.PureComponent<Props, State> {\n  renderConfirmModal = ({ onClose }: ModalProps) => {\n    return (\n      <ConfirmModal\n        cancelButtonText={this.props.cancelButtonText}\n        confirmButtonText={this.props.confirmButtonText}\n        confirmData={this.props.confirmData}\n        confirmDisable={this.props.confirmDisable}\n        header={this.props.modalHeader}\n        isDestructive={this.props.isDestructive}\n        onClose={onClose}\n        onConfirm={this.props.onConfirm}>\n        {this.props.modalBody}\n      </ConfirmModal>\n    );\n  };\n\n  render() {\n    return <ModalButton modal={this.renderConfirmModal}>{this.props.children}</ModalButton>;\n  }\n}\n"],"sourceRoot":""}
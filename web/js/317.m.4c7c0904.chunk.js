(window.webpackJsonp=window.webpackJsonp||[]).push([[317],{1608:function(t,e,n){"use strict";n.r(e),n.d(e,"OrganizationDelete",function(){return g});var o=n(352),i=n(368),s=n.n(i),a=n(362),r=n(439),l=n(445),c=n(0),m=n(844),d=n(354),u=n(466),h=n(11),p=n(372),b=n(411),f=n(511);class g extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={verify:""},this.fetchOrganizationPlanInfo=(()=>{Object(h.isSonarCloud)()&&Object(u.e)(this.props.organization.key).then(t=>{this.mounted&&this.setState({hasPaidPlan:"inactive"!==t.subscription.status})},()=>{this.mounted&&this.setState({hasPaidPlan:!1})})}),this.handleInput=(t=>{this.setState({verify:t.currentTarget.value})}),this.isVerified=(()=>this.state.verify.toLowerCase()===this.props.organization.name.toLowerCase()),this.onDelete=(()=>{const t=this.props.organization;return this.props.deleteOrganization(t.key).then(()=>{this.state.hasPaidPlan?this.props.router.replace({pathname:"/feedback/downgrade",state:{confirmationMessage:Object(c.m)("organization.deleted_x",t.name),organization:t,title:Object(c.l)("billing.downgrade.reason.title_deleted")}}):(Object(f.a)(Object(c.l)("organization.deleted")),this.props.router.replace("/"))})})}componentDidMount(){this.mounted=!0,this.fetchOrganizationPlanInfo()}componentWillUnmount(){this.mounted=!1}render(){const t=this.state.hasPaidPlan,e=Object(c.l)("organization.delete");return o.createElement(o.Fragment,null,o.createElement(s.a,{title:e}),o.createElement("div",{className:"page page-limited"},o.createElement("header",{className:"page-header"},o.createElement("h1",{className:"page-title"},e),o.createElement("div",{className:"page-description"},o.createElement(l.a,{message:Object(c.l)("organization.delete.description")}))),o.createElement(r.a,{confirmButtonText:Object(c.l)("delete"),confirmDisable:!this.isVerified(),isDestructive:!0,modalBody:o.createElement("div",null,t&&o.createElement(p.a,{variant:"warning"},Object(c.l)("organization.delete.sonarcloud.paid_plan_info")),o.createElement("p",null,Object(c.l)("organization.delete.question")),o.createElement("div",{className:"spacer-top"},o.createElement("label",{htmlFor:"downgrade-organization-name"},Object(c.l)("billing.downgrade.modal.type_to_proceed")),o.createElement("div",{className:"little-spacer-top"},o.createElement("input",{autoFocus:!0,className:"input-super-large",id:"downgrade-organization-name",onChange:this.handleInput,type:"text",value:this.state.verify})))),modalHeader:Object(c.m)("organization.delete_x",this.props.organization.name),onConfirm:this.onDelete},({onClick:t})=>o.createElement(d.a,{className:"js-custom-measure-delete button-red",onClick:t},Object(c.l)("delete")))))}}const C={deleteOrganization:m.a};e.default=Object(b.a)(Object(a.connect)(null,C)(g))},366:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n(352),i=n(397),s=n(353);function a(t){return o.createElement(i,Object.assign({className:s("modal",{"modal-medium":t.medium,"modal-large":t.large,"modal-simple":t.simple}),isOpen:!0,overlayClassName:s("modal-overlay",{"modal-no-backdrop":t.noBackdrop})},t))}i.setAppElement("#content")},385:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(352),i=n(366);class s extends o.Component{constructor(){super(...arguments),this.mounted=!1,this.state={submitting:!1},this.stopSubmitting=(()=>{this.mounted&&this.setState({submitting:!1})}),this.handleCloseClick=(t=>{t&&(t.preventDefault(),t.currentTarget.blur()),this.props.onClose()}),this.handleFormSubmit=(t=>{t.preventDefault(),this.submit()}),this.handleSubmitClick=(t=>{t&&(t.preventDefault(),t.currentTarget.blur()),this.submit()}),this.submit=(()=>{const t=this.props.onSubmit();t&&(this.setState({submitting:!0}),t.then(this.stopSubmitting,this.stopSubmitting))})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return o.createElement(i.a,{contentLabel:this.props.header,onRequestClose:this.props.onClose},this.props.children({onCloseClick:this.handleCloseClick,onFormSubmit:this.handleFormSubmit,onSubmitClick:this.handleSubmitClick,submitting:this.state.submitting}))}}},391:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o=n(352);class i extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.state={modal:!1},this.handleButtonClick=(()=>{this.setState({modal:!0})}),this.handleFormSubmit=(t=>{t&&t.preventDefault(),this.setState({modal:!0})}),this.handleCloseModal=(()=>{this.mounted&&this.setState({modal:!1})})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){return o.createElement(o.Fragment,null,this.props.children({onClick:this.handleButtonClick,onFormSubmit:this.handleFormSubmit}),this.state.modal&&this.props.modal({onClose:this.handleCloseModal}))}}},404:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var o=n(352),i=n(385),s=n(365),a=n(0),r=n(354);class l extends o.PureComponent{constructor(){super(...arguments),this.mounted=!1,this.handleSubmit=(()=>{const t=this.props.onConfirm(this.props.confirmData);return t?t.then(this.props.onClose,()=>{}):void this.props.onClose()}),this.renderModalContent=(({onCloseClick:t,onFormSubmit:e,submitting:n})=>{const i=this.props,l=i.children,c=i.confirmButtonText,m=i.confirmDisable,d=i.header,u=i.isDestructive,h=this.props.cancelButtonText,p=void 0===h?Object(a.l)("cancel"):h;return o.createElement("form",{onSubmit:e},o.createElement("header",{className:"modal-head"},o.createElement("h2",null,d)),o.createElement("div",{className:"modal-body"},l),o.createElement("footer",{className:"modal-foot"},o.createElement(s.a,{className:"spacer-right",loading:n}),o.createElement(r.f,{autoFocus:!0,className:u?"button-red":void 0,disabled:n||m},c),o.createElement(r.e,{disabled:n,onClick:t},p)))})}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const t=this.props.header;return o.createElement(i.a,{header:t,onClose:this.props.onClose,onSubmit:this.handleSubmit},this.renderModalContent)}}},439:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var o=n(352),i=n(391),s=n(404);class a extends o.PureComponent{constructor(){super(...arguments),this.renderConfirmModal=(({onClose:t})=>o.createElement(s.a,{cancelButtonText:this.props.cancelButtonText,confirmButtonText:this.props.confirmButtonText,confirmData:this.props.confirmData,confirmDisable:this.props.confirmDisable,header:this.props.modalHeader,isDestructive:this.props.isDestructive,onClose:t,onConfirm:this.props.onConfirm},this.props.modalBody))}render(){return o.createElement(i.a,{modal:this.renderConfirmModal},this.props.children)}}},511:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(428),i=n(418);function s(t){Object(o.default)().dispatch(i.b(t))}},844:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return l});var o=n(466),i=n(570),s=n(418),a=n(0);const r=(t,e)=>n=>o.j(t,e).then(()=>{n(i.h(t,e)),n(Object(s.b)(Object(a.l)("organization.updated")))}),l=t=>e=>o.c(t).then(()=>{e(i.c(t))})}}]);
//# sourceMappingURL=317.m.4c7c0904.chunk.js.map
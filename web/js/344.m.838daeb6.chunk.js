(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{366:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a(352),l=a(397),i=a(353);function n(e){return s.createElement(l,Object.assign({className:i("modal",{"modal-medium":e.medium,"modal-large":e.large,"modal-simple":e.simple}),isOpen:!0,overlayClassName:i("modal-overlay",{"modal-no-backdrop":e.noBackdrop})},e))}l.setAppElement("#content")},420:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var s=a(352),l=a(499),i=a(0);function n({className:e,severity:t}){return t?s.createElement("span",{className:e},s.createElement(l.a,{className:"little-spacer-right",severity:t}),Object(i.l)("severity",t)):null}},937:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return d});var s=a(352),l=a(366),i=a(373),n=a(420),r=a(395),o=a(468),c=a(0),m=a(455),h=a(354),p=a(372);class d extends s.PureComponent{constructor(e){super(e),this.mounted=!1,this.getParams=(({activation:e,rule:t}=this.props)=>{const a={};if(t&&t.params){for(const e of t.params)a[e.key]=e.defaultValue||"";if(e&&e.params)for(const t of e.params)a[t.key]=t.value}return a}),this.getQualityProfilesWithDepth=(({profiles:e}=this.props)=>Object(m.g)(e.filter(e=>!e.isBuiltIn&&e.actions&&e.actions.edit&&e.language===this.props.rule.lang)).map(e=>Object.assign({},e,{depth:e.depth-1}))),this.handleFormSubmit=(e=>{e.preventDefault(),this.setState({submitting:!0});const t={key:this.state.profile,organization:this.props.organization,params:this.state.params,rule:this.props.rule.key,severity:this.state.severity};Object(r.a)(t).then(()=>this.props.onDone(t.severity)).then(()=>{this.mounted&&(this.setState({submitting:!1}),this.props.onClose())},()=>{this.mounted&&this.setState({submitting:!1})})}),this.handleParameterChange=(e=>{const t=e.currentTarget,a=t.name,s=t.value;this.setState(e=>({params:Object.assign({},e.params,{[a]:s})}))}),this.handleProfileChange=(({value:e})=>{this.setState({profile:e})}),this.handleSeverityChange=(({value:e})=>{this.setState({severity:e})}),this.renderSeverityOption=(({value:e})=>s.createElement(n.a,{severity:e}));const t=this.getQualityProfilesWithDepth(e);this.state={params:this.getParams(e),profile:t.length>0?t[0].key:"",severity:e.activation?e.activation.severity:e.rule.severity,submitting:!1}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}render(){const e=this.props,t=e.activation,a=e.rule,n=this.state,r=n.profile,m=n.severity,d=n.submitting,u=a.params,v=void 0===u?[]:u,y=this.getQualityProfilesWithDepth(),g=!!a.templateKey,f=y.length<=0,b=!!t;return s.createElement(l.a,{contentLabel:this.props.modalHeader,onRequestClose:this.props.onClose},s.createElement("form",{onSubmit:this.handleFormSubmit},s.createElement("div",{className:"modal-head"},s.createElement("h2",null,this.props.modalHeader)),s.createElement("div",{className:"modal-body"},!b&&f&&s.createElement(p.a,{variant:"info"},Object(c.l)("coding_rules.active_in_all_profiles")),s.createElement("div",{className:"modal-field"},s.createElement("label",null,Object(c.l)("coding_rules.quality_profile")),s.createElement(i.c,{className:"js-profile",clearable:!1,disabled:d||1===y.length,onChange:this.handleProfileChange,options:y.map(e=>({label:"   ".repeat(e.depth)+e.name,value:e.key})),value:r})),s.createElement("div",{className:"modal-field"},s.createElement("label",null,Object(c.l)("severity")),s.createElement(i.c,{className:"js-severity",clearable:!1,disabled:d,onChange:this.handleSeverityChange,optionRenderer:this.renderSeverityOption,options:o.e.map(e=>({label:Object(c.l)("severity",e),value:e})),searchable:!1,value:m,valueRenderer:this.renderSeverityOption})),g?s.createElement("div",{className:"modal-field"},s.createElement("p",{className:"note"},Object(c.l)("coding_rules.custom_rule.activation_notice"))):v.map(e=>s.createElement("div",{className:"modal-field",key:e.key},s.createElement("label",{title:e.key},e.key),"TEXT"===e.type?s.createElement("textarea",{className:"width100",disabled:d,name:e.key,onChange:this.handleParameterChange,placeholder:e.defaultValue,rows:3,value:this.state.params[e.key]||""}):s.createElement("input",{className:"input-super-large",disabled:d,name:e.key,onChange:this.handleParameterChange,placeholder:e.defaultValue,type:"text",value:this.state.params[e.key]||""}),s.createElement("div",{className:"note",dangerouslySetInnerHTML:{__html:e.htmlDesc||""}})))),s.createElement("footer",{className:"modal-foot"},d&&s.createElement("i",{className:"spinner spacer-right"}),s.createElement(h.f,{disabled:d||f},b?Object(c.l)("save"):Object(c.l)("coding_rules.activate")),s.createElement(h.e,{disabled:d,onClick:this.props.onClose},Object(c.l)("cancel")))))}}}}]);
//# sourceMappingURL=344.m.838daeb6.chunk.js.map